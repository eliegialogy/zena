# test_file: ../../../../test/unit/zena/zena_tags_test.rb
default:
  context:
    lang: 'en'
    visitor: 'lion'
    node: 'status'
  src: "<r:tags do='each' join=',' do='[name]'/>"
  tem: "/list1 = @node.tags.*var1.name/"
  res: "blue,sky"

listing_no_tags:
  context:
    node: lion
  src: "<r:tags>Nothing</r:tags>"
  tem: "/list1 = @node.tags/"
  res: ""

listing_with_link:
  src: "<r:tags do='each' join=',' do='link' cat='[name]'/>"
  res: "<a href='/oo/projects/cleanWater/page22.html?cat=blue'>blue</a>,<a href='/oo/projects/cleanWater/page22.html?cat=sky'>sky</a>"

tagged_query:
  context:
    cat: blue
  src: "<r:context select='nodes where tag = param:cat in site' do='each' join=', ' do='[name]'/>"
  res: "bird, status"

images_tagged_blue:
  src: "<r:images where='tag=\"blue\"' in='site' do='each' join=', ' do='[name]'/>"
  res: "bird"

tagged_keys_rubyless:
  context:
    node: status
  src: "<r:tagged do='keys'><r:each join=', ' do='show'/></r:tagged>"
  res: "sky, blue"

tag_names:
  context:
    node: status
  src: "<r:tag_names><r:each join=', ' do='show'/></r:tag_names>"
  res: "blue, sky"

tag_cloud:
  src: "<r:tag_cloud in='project'><span do='each' join=' '><r:name/>(<r:show attr='count'/>)</span></r:tag_cloud>"
  res: "<span>sky(2)</span>"

input_tag:
  context:
    node: status
  src: "<r:input type='checkbox' name='tagged[]' value='sky'/>"
  tem: "<input name='node[tagged][]' type='checkbox' value='sky'<%= @node.tagged[\"sky\"] == \"sky\" ? \" checked='checked'\" : '' %>/>"
  res: "<input name='node[tagged][]' type='checkbox' value='sky' checked='checked'/>"