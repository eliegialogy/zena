open "/oo/testnode37.html?test=drop1"
assert_element_not_present 'drop121_33'

# Drag & Drop
set_timeout 4000
drag_and_drop_to_object "css=#drop11_33 > span.drag_handle", "drop12"
wait_for_element_present "drop12_33"
verify_text "drop12_33", "Art"
# Unlink
click "css=img[alt=remove]"
wait_for_element_not_present "drop12_33"

# Restart

# Drag & Drop
drag_and_drop_to_object "css=#drop11_33 > span.drag_handle", "drop12"
wait_for_element_present "drop12_33"
verify_text "drop12_33", "Art"

# Make sure the changes are commited to db
open "/oo/testnode37.html?test=drop1"
# This is a bug that is difficult to fix and has no consequences (drop
# works perfectly well)
# It should be drop12_33 but it is drop13_33 when inline.
# assert_element_present 'drop12_33'
assert_element_present 'drop13_33'
# Unlink
click "css=img[alt=remove]"
wait_for_element_not_present "drop13_33"
